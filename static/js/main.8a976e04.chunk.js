(this["webpackJsonpjson-visual-editor"]=this["webpackJsonpjson-visual-editor"]||[]).push([[0],{127:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),o=a.n(r),c=a(9),s=a(6),i=a(34),u=a.n(i),m=a(2),d=a(3),p=a(5),b=a(4),v=(a(53),a(8)),f="valid",E="invalid",h="",j="UPDATE_TEXT",g="SET_TEXT",O="CLEAR_TEXT",x="COPY_TEXT",y="PASTE_SAMPLE",T="SET_AUTO_FORMAT",N="RESET_VALID",C="OPEN_TEXTAREA",k="CLOSE_TEXTAREA",_="TOGGLE_TEXTAREA",A=a(35),S=a.n(A),w=a(36),F=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("ul",{className:"mdl-menu mdl-menu--top-left mdl-js-menu mdl-js-ripple-effect","data-mdl-for":"more-button"},l.a.createElement("li",{className:"mdl-menu__item",onClick:this.props.pasteSample},"Paste Sample JSON"),l.a.createElement("li",{className:"mdl-menu__item",onClick:function(){return e.props.setAutoFormat(!e.props.autoFormat)}},this.props.autoFormat?"Disable Auto Format":"Enable Auto Format"))}}]),a}(l.a.Component),L=Object(s.b)((function(e){return{autoFormat:e.autoFormat}}),(function(e){return{setAutoFormat:function(t){e(function(e){return{type:T,enabled:e}}(t))},pasteSample:function(){e({type:y})}}}))(F),D=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){new S.a("#copy-to-clipboard")}},{key:"downloadJson",value:function(e){var t=new Blob([e],{type:"application/json;charset=utf-8"});Object(w.saveAs)(t,"data.json")}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.isEmpty,r=t.textLength;return l.a.createElement("div",{className:"controls-area"},l.a.createElement("div",{className:"float-left"},l.a.createElement("button",{id:"copy-to-clipboard","data-clipboard-target":"#json-text",disabled:n,className:"mdl-button mdl-js-button mdl-button--icon",title:"Copy"},l.a.createElement("i",{className:"material-icons"},"content_copy"))),l.a.createElement("div",{className:"float-left"},l.a.createElement("button",{id:"donwload",disabled:n,className:"mdl-button mdl-js-button mdl-button--icon",onClick:function(){return e.downloadJson(e.props.text)},title:"Download"},l.a.createElement("i",{className:"material-icons"},"file_download"))),l.a.createElement("div",{className:"float-left"},l.a.createElement("button",{className:"mdl-button mdl-js-button mdl-button--icon",disabled:n,onClick:function(){return a({type:O})},title:"Clear"},l.a.createElement("i",{className:"material-icons"},"delete"))),l.a.createElement("div",{className:"float-left"},l.a.createElement("button",{className:"mdl-button mdl-js-button mdl-button--icon",title:"More",id:"more-button"},l.a.createElement("i",{className:"material-icons"},"more_vert")),l.a.createElement(L,null)),l.a.createElement("div",{className:"float-right control-count"},l.a.createElement("span",{className:"text-count"},r)))}}]),a}(l.a.Component),J=Object(s.b)((function(e){return{textLength:e.text.length,isEmpty:0===e.text.length,text:e.text}}))(D),R=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(v.a)(n)),n.onDrop=n.onDrop.bind(Object(v.a)(n)),n.resetTimeout=n.resetTimeout.bind(Object(v.a)(n)),n.timeoutId=0,n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.refs.jsonText.addEventListener("animationend",(function(t){"invalidFrames"!==t.animationName&&"validFrames"!==t.animationName||e.props.resetValid()}),!1)}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){var t=e.refs.jsonText.value;e.props.setText(t)}),1e3)}},{key:"onChange",value:function(e){this.resetTimeout(),this.props.updateText(e.target.value)}},{key:"onDrop",value:function(e){var t=this;if(e.stopPropagation(),e.preventDefault(),e.dataTransfer.files.length>0){var a=e.dataTransfer.files[0],n=new FileReader;n.onload=function(){t.props.setText(n.result)},n.readAsText(a)}}},{key:"render",value:function(){return l.a.createElement("div",{className:"textarea-column"},l.a.createElement("textarea",{id:"json-text",className:this.props.valid,placeholder:"Write JSON code or drop a JSON file here.",value:this.props.text,onChange:this.onChange,onDrop:this.onDrop,ref:"jsonText"}),l.a.createElement(J,null))}}]),a}(l.a.Component),P=Object(s.b)((function(e){return{text:e.text,autoFormat:e.autoFormat,valid:e.valid}}),(function(e){return{updateText:function(t){e({type:j,newText:t})},setText:function(t){e({type:g,newText:t})},resetValid:function(){e({type:N})}}}))(R),M=a(10),X=function(e){var t=e.data;return l.a.createElement("label",{className:"mdl-checkbox mdl-js-checkbox boolean-type"},l.a.createElement("input",{type:"checkbox",checked:t,readOnly:!0,className:"mdl-checkbox__input"}),l.a.createElement("span",{className:"mdl-checkbox__label"},t?"true":"false"))},V=function(e){var t=e.data;return l.a.createElement("span",{className:"number-type"},t)},z=a(37),I=a.n(z),U=function(e){var t=e.data,a="";return a=I.a.isURL(t)?t.match(/\.(jpg|jpeg|png|gif)$/)?l.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:t,alt:t}),l.a.createElement("br",null),l.a.createElement("span",null,t)):l.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",null,t)):'"'.concat(t,'"'),l.a.createElement("span",{className:"string-type"},a)},G=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={expanded:e.defaultValue},n}return Object(d.a)(a,[{key:"onClick",value:function(){var e=!this.state.expanded;this.setState({expanded:e}),"onChangeExpansion"in this.props&&this.props.onChangeExpansion(e)}},{key:"render",value:function(){var e=this,t=["component-expander",this.state.expanded?"expanded":"","mdl-button","mdl-js-button"].join(" ");return l.a.createElement("button",{className:t,onClick:function(t){return e.onClick(t)}},l.a.createElement("i",{className:"material-icons"},"expand_more"))}}]),a}(l.a.Component),q=function e(t){var a=t.data,r=t.level,o=void 0===r?0:r,c=Object(n.useState)(!0),s=Object(M.a)(c,2),i=s[0],u=s[1],m=5===o?0:o+1,d=null;if(null===a)d=l.a.createElement("span",{className:"null"},"null");else if(null!==a&&typeof a===typeof{}){var p=Object.keys(a).map((function(t){return l.a.createElement("tr",{key:t},l.a.createElement("th",null,t),l.a.createElement("td",null,l.a.createElement(e,{data:a[t],level:m})))})),b=Array.isArray(a)?"Array":"Object",v="["+p.length.toString()+"]";d=l.a.createElement("table",null,l.a.createElement("thead",{"data-level":o},l.a.createElement("tr",null,l.a.createElement("th",{className:"expand"},l.a.createElement(G,{defaultValue:i,onChangeExpansion:function(e){u(e)}})),l.a.createElement("th",{className:"objectType"},"".concat(b," ").concat(v)))),l.a.createElement("tbody",{className:i?"expanded":""},p))}else d="number"===typeof a?l.a.createElement(V,{data:a}):"string"===typeof a?l.a.createElement(U,{data:a}):"boolean"===typeof a?l.a.createElement(X,{data:a}):l.a.createElement("span",{className:"undefined"},a);return d},B=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement(q,{data:this.props.data})}}]),a}(l.a.Component),H=Object(s.b)((function(e){return{data:e.data}}))(B),W=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.dispatch;return l.a.createElement("div",{className:"closer"},l.a.createElement("button",{className:"mdl-button mdl-js-button mdl-button--icon",title:"Open/Close text area",onClick:function(){return e({type:_})},id:"expand-button"},l.a.createElement("i",{className:"material-icons"},"expand_more")))}}]),a}(l.a.Component),Q=Object(s.b)((function(e){return{isTextareaClose:e.isTextareaClose}}))(W),Y=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e={jsonText:["json-text","mdl-cell","mdl-cell--8-col-tablet"],visualized:["visualized-data","mdl-cell","mdl-cell--8-col-tablet"]};return this.props.isTextareaClose?(e.jsonText.push("closed","mdl-cell--1-col"),e.visualized.push("closed","mdl-cell--11-col")):(e.jsonText.push("mdl-cell--4-col"),e.visualized.push("mdl-cell--8-col")),l.a.createElement("div",{className:"mdl-layout mdl-js-layout mdl-layout--fixed-header"},l.a.createElement("header",{className:"mdl-layout__header"},l.a.createElement("div",{className:"mdl-layout__header-row"},l.a.createElement("h1",{className:"mdl-layout-title"},"JSON Visual Editor"),l.a.createElement("div",{className:"mdl-layout-spacer"}),l.a.createElement("nav",{className:"mdl-navigation"},l.a.createElement("a",{className:"mdl-navigation__link",href:"https://github.com/ogaoga/json-visual-editor/issues/new"},l.a.createElement("i",{className:"material-icons"},"feedback")," Feedback")))),l.a.createElement("main",{className:"mdl-layout__content"},l.a.createElement("div",{className:"mdl-grid"},l.a.createElement("section",{className:e.jsonText.join(" ")},l.a.createElement(P,null),l.a.createElement(Q,null)),l.a.createElement("section",{className:e.visualized.join(" ")},l.a.createElement(H,null)))),l.a.createElement("footer",null,l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("a",{href:"https://github.com/ogaoga/json-visual-editor"},"Source code on GitHub")),l.a.createElement("span",null," | "),l.a.createElement("span",null,l.a.createElement("a",{href:"http://qiita.com/ogaoga/items/1dae5586601e6900c3f1"},"Development guide on Qiita"))),l.a.createElement("div",null,l.a.createElement("span",null,"Copyright \xa9 2016 - 2017 ogaoga.org"))))}}]),a}(l.a.Component),$=Object(s.b)((function(e){return{isTextareaClose:e.isTextareaClose}}))(Y),K=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).previousEvent=null,n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementsByTagName("body")[0];t.addEventListener("drop",(function(a){"json-text"!==a.target.id&&(a.preventDefault(),a.stopPropagation()),e.previousEvent="drop",t.classList.remove("dragging")})),t.addEventListener("dragover",(function(a){return"dragenter"===e.previousEvent&&t.classList.add("dragging"),e.previousEvent="dragover",a.preventDefault(),!1})),t.addEventListener("dragenter",(function(){e.previousEvent="dragenter"})),t.addEventListener("dragleave",(function(){"dragover"===e.previousEvent&&t.classList.remove("dragging"),e.previousEvent="dragleave"}))}},{key:"render",value:function(){return l.a.createElement($,null)}}]),a}(l.a.Component),Z=a(38),ee={data:null,text:"",autoFormat:!1,valid:h,isTextareaClose:!1},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,a=function(e,t){var a=t.newText||"",n=e.data,l=e.valid;if(a.length>0)try{n=JSON.parse(a),e.autoFormat&&(a=JSON.stringify(n,null,2)),l=f}catch(r){n=null,l=E}else n=null,l=E;return[a,n,l]};switch(t.type){case g:var n=a(e,t),l=Object(M.a)(n,3),r=l[0],o=l[1],c=l[2];return Object.assign({},e,{text:r,data:o,valid:c});case j:return Object.assign({},e,{text:t.newText});case O:return Object.assign({},e,{text:"",data:null});case x:return e;case y:t.newText=JSON.stringify(Z);var s=a(e,t),i=Object(M.a)(s,3),u=i[0],m=i[1],d=i[2];return Object.assign({},e,{text:u,data:m,valid:d});case T:return Object.assign({},e,{autoFormat:t.enabled});case N:return Object.assign({},e,{valid:h});case C:return Object.assign({},e,{isTextareaClose:!1});case k:return Object.assign({},e,{isTextareaClose:!0});case _:return Object.assign({},e,{isTextareaClose:!e.isTextareaClose});default:return e}},ae=(a(127),Object(c.b)(u()())),ne=Object(c.c)(te,ae);o.a.render(l.a.createElement(s.a,{store:ne},l.a.createElement(K,null)),document.querySelector("#myApp"))},38:function(e){e.exports=JSON.parse('{"number":123456,"string":"Hello, World!","URL":"https://github.com/ogaoga/json-visual-editor","image":"https://raw.githubusercontent.com/ogaoga/json-visual-editor/develop/resources/json-visual-editor.png","null":null,"boolean":{"true":true,"false":false},"array":["apple","orange","banana"],"object":{"name":"John","age":32,"isMarried":true},"nested objects":{"object":{"object":{"object":{"object":{"object":{"color":"red"}}}}}}}')},39:function(e,t,a){e.exports=a(128)}},[[39,1,2]]]);
//# sourceMappingURL=main.8a976e04.chunk.js.map